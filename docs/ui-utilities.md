---
id: ui-utilities
title: bPanel UI Utilities
sidebar_label: Utilities
---

The following utilities help standardize implementation of your components
as well as to work more easily with bPanel themes.

<AUTOGENERATED_TABLE_OF_CONTENTS>

### `connectTheme`
`connectTheme` is what allows you to use the global theme object in your own
components. If you are using the theme state to style your components,
then your plugin will always match the style of the rest of bPanel.

`connectTheme` is a React [Higher Order Component](https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e)
that takes a component and decorates it with the theme object passed through its context.
Any component decorated by `connectTheme` will automatically have the theme available as a prop.
This also means that all [themeConfigs](/docs/theming-started.html#theme-config), even custom ones you've added, will be available.

```
import React from 'react';
import PropTypes from 'prop-types';
import { utils } from '@bpanel/bpanel-ui';

const { connectTheme } = utils;

const MyComponent = ({ theme }) =>
  <div style={{ borderColor: theme.themeVariables.themeColors.highlight1 }}>
    Hello World
  </div>

MyComponent.propTypes = {
  theme: PropTypes.object
};

export default connectTheme(MyComponent);
```

### `errorWrapper`
`errorWrapper` is a Higher Order Component for catching errors in your plugin or widget.
Top level plugins that decorate Panel already do this by default however for widgets that
are decorating another plugin for example, this helps to make sure that just the widget
crashes and not the whole plugin/view. `widgetCreator` also implements this by default.

Example:
```
import React from 'react';
import { errorWrapper } from '@bpanel/bpanel-ui';

class MyWidget extends React.PureComponent {
  componentDidMount() {
    throw 'A test error';
  }
  render() {
    <div>Hello World</div>
  }
}

export default errorWrapper(MyWidget);
```

### `widgetCreator`
A widget creator is for when you want to create a widget that [decorates another plugin](/docs/api-decorate-plugins.html).
For an example of this in action you can check out the [bPanel Dashboard](https://www.npmjs.com/package/@bpanel/dashboard) plugin
and available widgets for decorating it, such as the [Recent Blocks widget](https://www.npmjs.com/package/@bpanel/recent-blocks) which uses the `widgetCreator`.

Plugins are decorated by making certain hooks available in their render method. For the Dashboard, to add a widget on a decorator,
you can push it onto it as an array. `widgetCreator` will take a Component that's passed to it, wrappet it in `errorWrapper` and return a function that returns a React a component. This might change in the future, but using the widgetCreator to create your widget will ensure
that your component stays up to date with the API if there are any changes.

The returned Widget will expect one argument of a props object.

```
// myPlugin/components/MyWidget.js
import React from 'react';
import PropTypes from 'prop-types'
import { widgetCreator } from '@bpanel/bpanel-ui';

const MyWidget = name => <div>Hello: {name}</div>;
MyWidget.propTypes = { name: PropTypes.string };

export default widgetCreator(MyWidget);
```

```
// myPlugin/index.js
import MyWidget from './components/MyWidget';

const decorateDashboard = (Dashboard, { React, PropTypes }) => {
  return class extends React.PureComponent {
    constructor(props) {
      super(props);
    }
    static get propTypes() {
      bottomWidgets: PropTypes.array
    }

    render() {
      const { bottomWidgets } = this.props;
      bottomWidgets.push(MyWidget({ name: 'FooBar' }));
      return <Dashboard {...this.props} bottomWidgets={bottomWidgets} />;
    }
  }
}

export const decoratePlugin = { '@bpanel/dashboard': decorateDashboard };

```

### `makeRem`
`makeRem` takes a `size`, multiplies it by the `fontSizeBase`, then returns a size string with `'rem'` added to the end.
**Example**
```javascript
import { makeRem } from '@bpanel/bpanel-ui';

makeRem(5); // '5rem';
makeRem(10); // '10rem';
makeRem(0.5, 10); // '5rem';

```
More details on implementation [here](/docs/theming-variables.html#makerem).


### `makeGutter`
This is useful for creating style objects, taking a number and returning relative units
for use in a themeConfig or inline styles in your React Component.

**Example**
```javascript
// Example
import { makeGutter } from `@bpanel/bpanel-ui`;

makeGutter('padding', { left: 5, right: 5 }); // { paddingLeft: '5rem', paddingRight: '5rem' };
makeGutter('padding', { horizontal: 15, vertical: 10 }); // { paddingLeft: '15rem', paddingRight: '15rem', paddingTop: '10rem', paddingBottom: '10rem' };
makeGutter('margin', { all: 8 }); // { marginLeft: '8rem', marginRight: '8rem', marginTop: '8rem', marginBottom: '8rem' };

```

More details on implementation [here](/bpanel-docs/docs/theming-variables.html#makegutter).
